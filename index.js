var $=require("jquery");module.exports=function(){"use strict";function a(a,b){this.element=a,this.$element=$(this.element).addClass("easyNumber__input"),this.$parent=null,this.settings=$.extend({},c,b),this.settings.min=this.$element.data("min")?this.$element.data("min"):!1,this.settings.max=this.$element.data("max")?this.$element.data("max"):!1,this.init()}var b="easyNumber",c={plus:"+",minus:"-",readonly:!0,allowNegative:!1,dateFormat:"DD-MM-YYYY",timeFormat:"HH:mm",type:"int",validation:!1,zero:null};a.prototype={init:function(){(this.$element.is("input:text")||this.$element.is('input[type="number"]'))&&(this.prepareHtml(),null!==this.settings.zero&&this.$element.val(this.settings.zero),this.bindEvents())},prepareHtml:function(){this.$element.wrap('<div class="easyNumber" />'),this.$parent=this.$element.parent(),this.$parent.append(' <a class="easyNumber__plus" href="#">'+this.settings.plus+'</a> <a class="easyNumber__minus" href="#">'+this.settings.minus+"</a>"),this.settings.readonly&&this.$element.prop("readonly",!0)},bindEvents:function(){var a=this;this.$parent.find(".easyNumber__plus").on("click",function(b){b.preventDefault(),a.update(!0)}),this.$parent.find(".easyNumber__minus").on("click",function(b){b.preventDefault(),a.update(!1)}),this.settings.validation&&"numbers"===this.settings.validation&&this.$element.on("keypress",function(a){return a.charCode>47&&a.charCode<58})},update:function(a){"day"===this.settings.type?this.updateDay(a):"time"===this.settings.type?this.updateTime(a):this.updateInt(a)},updateInt:function(a){var b=this.$element.val()!==this.settings.zero&&this.$element.val().length?parseInt(this.$element.val(),10):0,c=a?b+1:b-1,d=!1;c=parseInt(c,10),!this.settings.allowNegative&&1>c&&(c=0),0===c&&this.settings.zero&&(d=this.settings.zero),this.settings.max&&c>this.settings.max||this.settings.min&&c<this.settings.min||this.$element.val(d?d:c)},updateDay:function(a){var b=this.$element.val(),c="";this.settings.min===b&&!a||this.settings.max===b&&a||(c=a?moment(b,this.settings.dateFormat).add(1,"day").format(this.settings.dateFormat):moment(b,this.settings.dateFormat).subtract(1,"day").format(this.settings.dateFormat),this.$element.val(c),this.$element.attr("value",c),this.$element.trigger("change",!0))},updateTime:function(a){var b=this.$element.val(),c="00:00";c=a?moment(b,this.settings.timeFormat).add("1","minutes").format(this.settings.timeFormat):moment(b,this.settings.timeFormat).subtract("1","minutes").format(this.settings.timeFormat),this.$element.val(c).attr("value",c).trigger("change")}},$.fn[b]=function(c){return this.each(function(){$.data(this,"plugin_"+b)||$.data(this,"plugin_"+b,new a(this,c))})}}(jQuery);